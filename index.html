<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>TO DO LIST</title>
</head>
<body>
    <h1>TO DO</h1>
    <div>
        <form action="">
            <div id="input">
                <input type="text" id="subject" placeholder="할 일을 입력하세요">
                <button onclick="newRegister(); return false">입력</button>
            </div> 
        </form>

        <div id="listContainer">
            <ul id="list" onclick="delRegister();">
                <li>아침 스트레칭</li>
            </ul>
        </div>
    </div>
    <footer>
        <button id="delAll" onclick="delAllRegister(); return false">할 일 모두 삭제하기</button>
    </footer>
   


    <script> 
// 리스트 스타일을 랜덤 이미지로 설정
        const images = [
            'image/goldkiwi.png',
            'image/grape.png',
            'image/grapefruit.png',
            'image/greenkiwi.png',
            'image/lemon.png',
            'image/shine.png',
            'image/strawberry.png',
            'image/tangerine.png',
            'image/tomato.png'
        ];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // 리스트 항목을 가져오기
        const listItems = document.querySelectorAll('#list li');
        const numItems = listItems.length;

        // 이미지를 필요한 만큼만 사용하기
        const imagesToUse = [...images]; // 복사본 생성
        shuffleArray(imagesToUse); // 이미지를 무작위로 섞기

        // 이미지 배열을 반복하여 항목에 배정하기
        listItems.forEach((item, index) => {
            // 배열이 부족할 경우 반복
            const imageIndex = index % imagesToUse.length;
            item.style.backgroundImage = `url(${imagesToUse[imageIndex]})`;
        });


//노드 추가 함수
        function newRegister() {
            var newLi = document.createElement('li');
            var subject = document.querySelector('#subject');
            var txtNode = document.createTextNode(subject.value);

            newLi.appendChild(txtNode);
            document.getElementById('list').appendChild(newLi);

            subject.value = '';

            //리스트 스타일 적용
            // 리스트 항목을 가져오기
            const listItems = document.querySelectorAll('#list li');
            const numItems = listItems.length;

            // 이미지를 필요한 만큼만 사용하기
            const imagesToUse = [...images]; // 복사본 생성
            shuffleArray(imagesToUse); // 이미지를 무작위로 섞기

            // 이미지 배열을 반복하여 항목에 배정하기
            listItems.forEach((item, index) => {
                // 배열이 부족할 경우 반복
                const imageIndex = index % imagesToUse.length;
                item.style.backgroundImage = `url(${imagesToUse[imageIndex]})`;
            });
            
        }

//노드 삭제 함수 (GPT)
        function delRegister() {
            document.getElementById("list").addEventListener("click", function(event) {     //event는 함수를 실행시킨 이벤트 그 자체
                if (event.target.tagName === "LI") {        //target은 이벤트가 발생한 요소(li), tagName은 대문자 문자열을 반환
                    event.target.remove();
                }
            });
        }

//모두 삭제 함수
        function delAllRegister() {
            const ulNode = document.querySelector("#list");     //부모노드
            ulNode.replaceChildren();       //replaceChildren은 파라미터로 아무것도 전달되지 않으면, 모든 자식 노드가 삭제됨.
        }

    </script>
</body>
</html>
